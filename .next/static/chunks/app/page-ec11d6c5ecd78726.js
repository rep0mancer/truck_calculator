(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6053:(e,t,a)=>{Promise.resolve().then(a.bind(a,3992))},3992:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>B});var l=a(2860),s=a(3200);let i=0,n=new Map,r=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},d=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?r(a):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function u(e){c=d(c,e),o.forEach(e=>{e(c)})}function h(e){let{...t}=e,a=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),l=()=>u({type:"DISMISS_TOAST",toastId:a});return u({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||l()}}}),{id:a,dismiss:l,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function g(){let[e,t]=s.useState(c);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:h,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}var p=a(4964),m=a(1073),x=a(2906),b=a(9769),f=a(2460);function w(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,f.QP)((0,b.$)(t))}let y=p.Kq,k=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(p.LM,{ref:t,className:w("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a),...s})});k.displayName=p.LM.displayName;let N=(0,m.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),j=s.forwardRef((e,t)=>{let{className:a,variant:s,...i}=e;return(0,l.jsx)(p.bL,{ref:t,className:w(N({variant:s}),a),...i})});j.displayName=p.bL.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(p.rc,{ref:t,className:w("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",a),...s})}).displayName=p.rc.displayName;let v=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(p.bm,{ref:t,className:w("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",a),"toast-close":"",...s,children:(0,l.jsx)(x.A,{className:"h-4 w-4"})})});v.displayName=p.bm.displayName;let P=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(p.hE,{ref:t,className:w("text-sm font-semibold [&+div]:text-xs",a),...s})});P.displayName=p.hE.displayName;let S=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(p.VY,{ref:t,className:w("text-sm opacity-90",a),...s})});function I(){let{toasts:e}=g();return(0,l.jsxs)(y,{children:[e.map(function(e){let{id:t,title:a,description:s,action:i,...n}=e;return(0,l.jsxs)(j,{...n,children:[(0,l.jsxs)("div",{className:"grid gap-1",children:[a&&(0,l.jsx)(P,{children:a}),s&&(0,l.jsx)(S,{children:s})]}),i,(0,l.jsx)(v,{})]},t)}),(0,l.jsx)(k,{})]})}S.displayName=p.VY.displayName;let W=s.forwardRef((e,t)=>{let{className:a,type:s,...i}=e;return(0,l.jsx)("input",{type:s,className:w("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...i})});function E(e){let{entries:t,onChange:a,palletType:s,preferredId:i=null,onSetPreferred:n,stackableEnabled:r=!1}=e,d=e=>{e===i&&n&&n(null),a(t.filter(t=>t.id!==e))},o=(e,l,s)=>{a(t.map(t=>{if(t.id===e){let a="quantity"===l?parseInt(s,10)||0:t.quantity,r="weight"===l?s:t.weight;return 0===a&&e===i&&n&&n(null),{...t,quantity:a,weight:r}}return t}))},c=(e,l)=>{a(t.map(t=>t.id===e?{...t,stackable:l}:t))};return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)("label",{className:"w-20 text-center text-xs font-semibold text-slate-600",children:"Anzahl"}),(0,l.jsxs)("label",{className:"w-32 text-center text-xs font-semibold text-slate-600",children:["Gewicht/",s," (kg)"]}),r&&(0,l.jsx)("span",{className:"text-xs font-semibold text-slate-600",children:"Stapelbar"})]}),t.map(e=>(0,l.jsxs)("div",{className:"flex items-center gap-3 mt-2 rounded-2xl border border-white/30 bg-white/10 px-3 py-2 backdrop-blur-xl shadow-[0_18px_36px_-28px_rgba(15,23,42,0.45)]",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{type:"button",className:"h-8 w-8 flex items-center justify-center rounded-full text-base font-semibold leading-none",onClick:()=>o(e.id,"quantity",String(Math.max(0,e.quantity-1))),"aria-label":"Menge reduzieren",children:"−"}),(0,l.jsx)(W,{type:"number",min:"0",value:e.quantity,onChange:t=>o(e.id,"quantity",t.target.value),placeholder:"Anzahl",className:"w-16 text-center font-semibold"}),(0,l.jsx)("button",{type:"button",className:"h-8 w-8 flex items-center justify-center rounded-full text-base font-semibold leading-none",onClick:()=>o(e.id,"quantity",String(e.quantity+1)),"aria-label":"Menge erh\xf6hen",children:"+"})]}),(0,l.jsx)(W,{type:"number",min:"0",value:e.weight,onChange:t=>o(e.id,"weight",t.target.value),placeholder:"Gewicht/".concat(s),className:"w-32 text-center font-semibold"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[r&&(0,l.jsx)("label",{className:"flex items-center gap-1 text-xs text-slate-700",children:(0,l.jsx)("input",{type:"checkbox",checked:!!e.stackable,onChange:t=>c(e.id,t.target.checked),className:"h-4 w-4"})}),t.length>1&&(0,l.jsx)("button",{type:"button",onClick:()=>d(e.id),className:"h-8 w-8 flex items-center justify-center rounded-full text-base font-semibold leading-none","aria-label":"Gruppe entfernen",children:"\xd7"})]})]},e.id)),(0,l.jsx)("button",{onClick:()=>{a([...t,{id:Date.now(),weight:"",quantity:0,stackable:!1}])},className:"mt-3 w-full py-2 text-sm font-semibold tracking-wide rounded-2xl",children:"Gewichtsgruppe hinzuf\xfcgen"})]})}W.displayName="Input";let L={roadTrain:{name:"H\xe4ngerzug (2x 7,2m)",units:[{id:"unit1",length:720,width:245,occupiedRects:[]},{id:"unit2",length:720,width:245,occupiedRects:[]}],totalLength:1440,usableLength:1440,maxWidth:245,maxGrossWeightKg:24e3},curtainSider:{name:"Planensattel Standard (13.2m)",units:[{id:"main",length:1320,width:245,occupiedRects:[]}],totalLength:1320,usableLength:1320,maxWidth:245,maxGrossWeightKg:24e3},frigo:{name:"Frigo (K\xfchler) Standard (13.2m)",units:[{id:"main",length:1320,width:245,occupiedRects:[]}],totalLength:1320,usableLength:1320,maxWidth:245,maxGrossWeightKg:18300},smallTruck:{name:"Motorwagen (7.2m)",units:[{id:"main",length:720,width:245,occupiedRects:[]}],totalLength:720,usableLength:720,maxWidth:245,maxGrossWeightKg:1e4},Waggon:{name:"Waggon POE",units:[{id:"main",length:1370,width:290,occupiedRects:[]}],totalLength:1370,usableLength:1370,maxWidth:290,maxDinPallets:26,maxGrossWeightKg:24e3},Waggon2:{name:"Waggon KRM",units:[{id:"main",length:1600,width:290,occupiedRects:[]}],totalLength:1600,usableLength:1600,maxWidth:290,maxDinPallets:28,maxGrossWeightKg:24e3}},D={euro:{name:"Euro Palette (1.2m x 0.8m)",type:"euro",length:120,width:80,area:9600,color:"bg-blue-500",borderColor:"border-blue-700"},industrial:{name:"Industrial Palette (1.2m x 1.0m)",type:"industrial",length:120,width:100,area:12e3,color:"bg-green-500",borderColor:"border-green-700"}},T=new Intl.NumberFormat("de-DE",{maximumFractionDigits:0}),A=(e,t)=>{var a,l,s;let i=(e||[]).flatMap(e=>Array.from({length:e.quantity},()=>({weight:parseFloat(e.weight)||0}))),n=i.length,r=[],d=0,o=[];n>38&&o.push("Die maximale Kapazit\xe4t des Waggons von ".concat(38," EUP wurde \xfcberschritten. ").concat(n-38," Palette(n) konnten nicht geladen werden."));let c=Math.min(n,38),u=0;for(let e=0;e<11&&u<c;e++)r.push({x:120*e,y:0,width:120,height:80,type:"euro",key:"eup_waggon_".concat(u),labelId:u+1}),d+=(null===(a=i[u])||void 0===a?void 0:a.weight)||0,u++;for(let e=0;e<11&&u<c;e++)r.push({x:120*e,y:80,width:120,height:80,type:"euro",key:"eup_waggon_".concat(u),labelId:u+1}),d+=(null===(l=i[u])||void 0===l?void 0:l.weight)||0,u++;for(let e=0;e<16&&u<c;e++)r.push({x:80*e,y:160,width:80,height:120,type:"euro",key:"eup_waggon_".concat(u),labelId:u+1}),d+=(null===(s=i[u])||void 0===s?void 0:s.weight)||0,u++;let h=[{unitId:t.units[0].id,unitLength:t.units[0].length,unitWidth:t.units[0].width,pallets:r}],g=9600*u,p=t.usableLength*t.maxWidth;return{palletArrangement:h,loadedIndustrialPalletsBase:0,loadedEuroPalletsBase:u,totalDinPalletsVisual:0,totalEuroPalletsVisual:u,utilizationPercentage:parseFloat((p>0?g/p*100:0).toFixed(1)),warnings:o,totalWeightKg:d,eupLoadingPatternUsed:"custom"}},_=function(e,t,a,l,s,i){var n,r,d,o;let c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"DIN_FIRST",u=arguments.length>7?arguments[7]:void 0,h=arguments.length>8?arguments[8]:void 0,g=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"axle_safe",p=JSON.parse(JSON.stringify(L[e])),m=["Waggon","Waggon2"].includes(e),x=!m&&l,b=!m&&s,f=a.every(e=>0===e.quantity),w=t.some(e=>e.quantity>0);if(m&&f&&w){let e=A(t,p);return l&&e.warnings.push("Info: Stapeln ist auf dem Waggon nicht m\xf6glich und wurde deaktiviert."),e}let y=null!==(n=p.maxGrossWeightKg)&&void 0!==n?n:24e3,k=null!==(d=null!==(r=p.usableLength)&&void 0!==r?r:p.totalLength)&&void 0!==d?d:1320,N=null!==(o=p.maxWidth)&&void 0!==o?o:245,j=[];m&&(s||l)&&j.push("Info: Stapeln ist auf dem Waggon nicht m\xf6glich und wurde deaktiviert.");let v=1,P=(e,t)=>{let a=[];for(let l of e){let e=Math.max(0,Number(l.quantity)||0),s=parseFloat(l.weight)||0;for(let i=0;i<e;i++)a.push({id:v++,type:t,weight:s,stackable:!!l.stackable,sourceId:l.id})}return a},S=P(t,"euro"),I=P(a,"industrial"),W=[];W="DIN_FIRST"===c?[...I,...S]:[...S,...I];let E="string"==typeof u?parseInt(u,10):null!=u?u:1/0,D="string"==typeof h?parseInt(h,10):null!=h?h:1/0,T="number"==typeof p.maxDinPallets?p.maxDinPallets:void 0,_=[],U=[],C=0,F=0,q=0,R=0,z="broad"===i?"broad":"long";for(;q<W.length;){let e,t,a;let l=W[q],s=l.type;if("industrial"===s)e=100,t=2,a=120;else{if("auto"===i){let e=k-C;e<120&&e>=80&&(z="broad")}"broad"===z?(e=80,t=2,a=120):(e=120,t=3,a=80)}if(C+e>k){U.push(l),q++;continue}if("industrial"===s&&void 0!==T&&R+t>T){let e=T-R;if(e<=0){U.push(l),q++;continue}t=e}let n=[],r=0,d=!0;for(let e=0;e<t&&q<W.length;e++){let t=W[q];if(t.type!==s)break;if(y>0&&F+r+t.weight>y){j.some(e=>e.includes("Gewichtslimit"))||j.push("Gewichtslimit erreicht."),U.push(t),q++,e--;continue}n.push(t),r+=t.weight,t.stackable||(d=!1),q++}if(0===n.length)continue;let o={type:s,startX:C,length:e,palletsPerRow:n.length,visualWidth:a,basePallets:n,stackedPallets:[],isStackable:d&&("euro"===s?x:b)};_.push(o),C+=e,F+=r,"industrial"===s&&(R+=n.length)}let M=0,K=0,B=U.filter(e=>"euro"===e.type),V=U.filter(e=>"industrial"===e.type),G=(e,t)=>{let a="euro"===t?x:b,l="euro"===t?E:D,s="euro"===t?M:K;if(!a)return e;let i=_.filter(e=>e.type===t&&e.isStackable&&0===e.stackedPallets.length);"axle_safe"===g?i.sort((e,t)=>{let a=e.startX>=380,l=t.startX>=380;return a&&!l?-1:!a&&l?1:a?t.startX-e.startX:e.startX-t.startX}):i.sort((e,t)=>e.startX-t.startX);let n=[],r=0,d=0;for(;r<e.length;){let t=e[r];if(s>=l||!t.stackable){n.push(t),r++;continue}let a=!1;for(;d<i.length;){let e=i[d];if(e.stackedPallets.length<e.basePallets.length){if(y>0&&F+t.weight>y){j.some(e=>e.includes("Gewichtslimit"))||j.push("Gewichtslimit erreicht."),n.push(t),r++,a=!0;break}e.stackedPallets.push(t),F+=t.weight,s++,r++,a=!0;break}d++}!a&&(n.push(t),r++)}return"euro"===t?M=s:K=s,n};"DIN_FIRST"===c?(G(V,"industrial"),G(B,"euro")):(G(B,"euro"),G(V,"industrial"));let O=[],X=0,H=0,Y=0,J=p.units,Q=0,Z=0,$=0;for(let e of _){for(;Q<J.length;){let t=$+J[Q].length;if(e.startX<t)break;Z=t,$=t,Q++}if(Q>=J.length)break;let t=J[Q],a=e.startX-Z,l=e.visualWidth,s=Math.floor((N-e.basePallets.length*l)/2);for(let i=0;i<e.basePallets.length;i++){let n=e.basePallets[i],r=e.stackedPallets[i],d=void 0!==r,o="euro"===n.type?++H:++X,c=s+i*l;Y+=e.length*l;let u={key:"".concat(n.type,"_").concat(n.id),type:n.type,x:a,y:c,width:e.length,height:l,labelId:o,isStackedTier:d?"base":null,showAsFraction:d,displayBaseLabelId:o,displayStackedLabelId:void 0,unitId:t.id};if(d){let s="euro"===r.type?++H:++X;u.displayStackedLabelId=s,O.push(u);let i={key:"".concat(r.type,"_").concat(r.id,"_stack"),type:r.type,x:a,y:c,width:e.length,height:l,labelId:s,isStackedTier:"top",showAsFraction:!0,displayBaseLabelId:o,displayStackedLabelId:s,unitId:t.id};O.push(i)}else O.push(u)}}let ee=I.length,et=S.length,ea=_.filter(e=>"industrial"===e.type).reduce((e,t)=>e+t.basePallets.length,0),el=_.filter(e=>"euro"===e.type).reduce((e,t)=>e+t.basePallets.length,0),es=_.filter(e=>"industrial"===e.type).reduce((e,t)=>e+t.stackedPallets.length,0),ei=_.filter(e=>"euro"===e.type).reduce((e,t)=>e+t.stackedPallets.length,0),en=O.filter(e=>"industrial"===e.type).length,er=O.filter(e=>"euro"===e.type).length,ed=Math.max(0,ee-(ea+es)),eo=Math.max(0,et-(el+ei)),ec=[];ed>0&&ec.push("".concat(ed," DIN")),eo>0&&ec.push("".concat(eo," EUP")),ec.length>0&&j.push("Konnte nicht alle Paletten laden. \xdcbrig: ".concat(ec.join(" und "),".")),void 0!==T&&ee>T&&300!==ee&&j.push("".concat(p.name.trim()," maximale DIN-Kapazit\xe4t ist ").concat(T,". Angeforderte Menge ").concat(ee,", es werden ").concat(Math.min(T,ea)," platziert."));let eu=k*N,eh=eu>0?parseFloat((Y/eu*100).toFixed(1)):0,eg=N>0?Y/N:0;if(eg>0){let e=F/(eg/100);e>=1800&&j.push("ACHTUNG – m\xf6gliche Achslast\xfcberschreitung: ".concat(e.toFixed(1)," kg/m"))}return k>0&&F>=10500&&eg/k*100<=40&&j.push("ACHTUNG – mehr als 10.5t auf weniger als 40% der Ladefl\xe4che"),es>=16&&j.push("ACHTUNG - ACHSLAST bei DIN im AUGE BEHALTEN! (".concat(es," gestapelte DIN)")),ei>=18&&j.push("ACHTUNG - ACHSLAST bei EUP im AUGE BEHALTEN! (".concat(ei," gestapelte EUP)")),{palletArrangement:J.map(e=>({unitId:e.id,unitLength:e.length,unitWidth:e.width,pallets:O.filter(t=>t.unitId===e.id)})),loadedIndustrialPalletsBase:ea,loadedEuroPalletsBase:el,totalDinPalletsVisual:en,totalEuroPalletsVisual:er,utilizationPercentage:eh,warnings:Array.from(new Set(j)),totalWeightKg:F,eupLoadingPatternUsed:"auto"===i?"auto":i||"none"}},U={euro:{background:"linear-gradient(135deg, hsla(217, 100%, 68%, 0.92), hsla(217, 98%, 56%, 0.98))",borderColor:"hsla(218, 96%, 52%, 0.9)",textColor:"rgba(15, 23, 42, 0.95)",highlightBorder:"hsla(217, 96%, 80%, 0.65)",shadow:"0 16px 32px -22px rgba(37, 99, 235, 0.85)"},industrial:{background:"linear-gradient(135deg, hsla(142, 82%, 64%, 0.88), hsla(142, 84%, 48%, 0.95))",borderColor:"hsla(142, 78%, 42%, 0.88)",textColor:"rgba(15, 23, 42, 0.9)",highlightBorder:"hsla(142, 80%, 76%, 0.55)",shadow:"0 16px 32px -24px rgba(22, 163, 74, 0.75)"}},C=function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.35;if(!e||!e.type||!D[e.type])return null;let s=null!==(t=U[e.type])&&void 0!==t?t:U.euro,i=D[e.type],n=e.height*a,r=e.width*a,d=e.y*a,o=e.x*a,c=e.showAsFraction&&e.displayStackedLabelId?"".concat(e.displayBaseLabelId,"/").concat(e.displayStackedLabelId):"".concat(e.labelId);0===e.labelId&&(c="?");let u="".concat(i.name," #").concat(e.labelId);return e.showAsFraction&&(u="".concat(i.name," (Stapel: ").concat(e.displayBaseLabelId,"/").concat(e.displayStackedLabelId,")")),"top"===e.isStackedTier&&(u+=" - Oben"),"base"===e.isStackedTier&&(u+=" - Basis des Stapels"),(0,l.jsxs)("div",{title:u,className:"absolute border flex items-center justify-center rounded-sm",style:{left:"".concat(d,"px"),top:"".concat(o,"px"),width:"".concat(n,"px"),height:"".concat(r,"px"),opacity:"top"===e.isStackedTier?.72:1,zIndex:"top"===e.isStackedTier?10:5,fontSize:"10px",background:s.background,borderColor:s.borderColor,boxShadow:s.shadow,color:s.textColor,filter:"saturate(1.3)"},children:[(0,l.jsx)("span",{className:"font-semibold select-none",style:{color:s.textColor,textShadow:"0 1px 3px rgba(15, 23, 42, 0.45)"},children:c}),"top"===e.isStackedTier&&(0,l.jsx)("div",{className:"absolute inset-0 pointer-events-none rounded-sm",style:{borderTop:"1.5px solid ".concat(s.highlightBorder),borderLeft:"1.5px solid ".concat(s.highlightBorder),borderRadius:"0.2rem"}})]},e.key)};function F(e){let{palletArrangement:t,selectedTruck:a,truckConfig:s}=e;return(0,l.jsxs)("div",{className:"lg:col-span-2 bg-gray-100 p-6 rounded-lg border border-gray-200 shadow-sm flex flex-col items-center justify-center","data-selected-truck":a,children:[(0,l.jsx)("p",{className:"text-slate-100 text-lg mb-4 font-semibold drop-shadow",children:"Ladefl\xe4che Visualisierung"}),t.map((e,t)=>(0,l.jsxs)("div",{className:"mb-6 w-full flex flex-col items-center",children:[s.units.length>1&&(0,l.jsxs)("p",{className:"text-sm text-slate-200 mb-2 drop-shadow-sm",children:["Einheit ",t+1," (",e.unitLength/100,"m x ",e.unitWidth/100,"m)"]}),0===t&&(0,l.jsxs)("svg",{"aria-hidden":!0,role:"presentation",className:"block",width:.35*e.unitWidth,height:24,viewBox:"0 0 ".concat(.35*e.unitWidth," 24"),children:[(0,l.jsx)("rect",{x:"0",y:"6",width:.35*e.unitWidth,height:"16",rx:"6",fill:"rgba(59,130,246,0.4)",stroke:"rgba(96,165,250,0.65)"}),(0,l.jsx)("path",{d:"M ".concat(.35*e.unitWidth/2-12," 6 L ").concat(.35*e.unitWidth/2," 0 L ").concat(.35*e.unitWidth/2+12," 6 Z"),fill:"rgba(59,130,246,0.55)"}),(0,l.jsx)("text",{x:.35*e.unitWidth/2,y:20,textAnchor:"middle",fontSize:"10",fontWeight:700,fill:"rgba(15,23,42,0.85)",children:"Front"})]}),(0,l.jsx)("div",{className:"relative overflow-hidden rounded-2xl border border-white/40 shadow-[0_18px_45px_-32px_rgba(15,23,42,0.55)]",style:{width:"".concat(.35*e.unitWidth,"px"),height:"".concat(.35*e.unitLength,"px"),background:"linear-gradient(160deg, rgba(148, 163, 184, 0.25), rgba(226, 232, 240, 0.18))",backdropFilter:"blur(26px)",WebkitBackdropFilter:"blur(26px)"},children:e.pallets.map(e=>C(e,.35))})]},e.unitId)),0===t.length&&(0,l.jsx)("p",{className:"text-slate-200/80",children:"Keine Paletten zum Anzeigen."})]})}var q=a(5555),R=a(2286);let z=()=>({eupWeights:[{id:Date.now(),weight:"",quantity:0,stackable:!1}],dinWeights:[{id:Date.now()+1,weight:"",quantity:0,stackable:!1}]}),M=e=>e.reduce((e,t)=>e+(t.stackable?t.quantity:0),0),K=(0,q.v)()((0,R.lt)((e,t)=>({selectedTruck:"curtainSider",...z(),eupLoadingPattern:"auto",isEUPStackable:!1,isDINStackable:!1,stackingStrategy:"axle_safe",loadedEuroPalletsBase:0,loadedIndustrialPalletsBase:0,totalEuroPalletsVisual:0,totalDinPalletsVisual:0,utilizationPercentage:0,warnings:[],palletArrangement:[],totalWeightKg:0,actualEupLoadingPattern:"auto",remainingCapacity:{eup:0,din:0},lastEdited:"eup",setSelectedTruck:t=>e(()=>{let e={selectedTruck:t};return["Waggon","Waggon2"].includes(t)&&(e.isEUPStackable=!1,e.isDINStackable=!1),e},!1,"setSelectedTruck"),setEupWeights:t=>e({eupWeights:t},!1,"setEupWeights"),setDinWeights:t=>e({dinWeights:t},!1,"setDinWeights"),setEupLoadingPattern:t=>e({eupLoadingPattern:t},!1,"setEupLoadingPattern"),setIsEUPStackable:t=>e({isEUPStackable:t},!1,"setIsEUPStackable"),setIsDINStackable:t=>e({isDINStackable:t},!1,"setIsDINStackable"),setStackingStrategy:t=>e({stackingStrategy:t},!1,"setStackingStrategy"),setLastEdited:t=>e({lastEdited:t},!1,"setLastEdited"),clearAllPallets:()=>e(()=>{let e=z(),a=L[t().selectedTruck].units.map(e=>({unitId:e.id,unitLength:e.length,unitWidth:e.width,pallets:[]}));return{...e,isEUPStackable:!1,isDINStackable:!1,eupLoadingPattern:"auto",lastEdited:"eup",loadedEuroPalletsBase:0,loadedIndustrialPalletsBase:0,totalEuroPalletsVisual:0,totalDinPalletsVisual:0,utilizationPercentage:0,warnings:[],palletArrangement:a,totalWeightKg:0,actualEupLoadingPattern:"auto",remainingCapacity:{eup:0,din:0}}},!1,"clearAllPallets"),maximizePallets:a=>{let l=t(),s="euro"===a?[{id:1,quantity:300,weight:"0",stackable:l.isEUPStackable}]:[],i="industrial"===a?[{id:1,quantity:300,weight:"0",stackable:l.isDINStackable}]:[],n=_(l.selectedTruck,s,i,l.isEUPStackable,l.isDINStackable,"auto","euro"===a?"EUP_FIRST":"DIN_FIRST",M(s),M(i),l.stackingStrategy);"industrial"===a?e(()=>({dinWeights:[{id:Date.now(),weight:"",quantity:n.totalDinPalletsVisual,stackable:l.isDINStackable}],eupWeights:[{id:Date.now()+1,weight:"",quantity:0,stackable:l.isEUPStackable}],lastEdited:"din"}),!1,"maximizePallets"):e(()=>({eupWeights:[{id:Date.now(),weight:"",quantity:n.totalEuroPalletsVisual,stackable:l.isEUPStackable}],dinWeights:[{id:Date.now()+1,weight:"",quantity:0,stackable:l.isDINStackable}],lastEdited:"eup"}),!1,"maximizePallets")},fillRemaining:a=>{let l=t(),s="euro"===a?l.eupWeights[l.eupWeights.length-1]:l.dinWeights[l.dinWeights.length-1],i=(null==s?void 0:s.weight)||"0",n="euro"===a?[...l.eupWeights,{id:-1,quantity:300,weight:i,stackable:l.isEUPStackable}]:[...l.eupWeights],r="industrial"===a?[...l.dinWeights,{id:-1,quantity:300,weight:i,stackable:l.isDINStackable}]:[...l.dinWeights],d=_(l.selectedTruck,n,r,l.isEUPStackable,l.isDINStackable,"auto","euro"===a?"DIN_FIRST":"EUP_FIRST",M(n),M(r),l.stackingStrategy),o=l.eupWeights.reduce((e,t)=>e+t.quantity,0),c=l.dinWeights.reduce((e,t)=>e+t.quantity,0),u=d.totalEuroPalletsVisual-o,h=d.totalDinPalletsVisual-c,g=!1;return e(e=>{let t={lastEdited:"euro"===a?"eup":"din"};if("euro"===a&&u>0&&e.eupWeights.length>0){let a=[...e.eupWeights],l=a.length-1,s={...a[l],quantity:a[l].quantity+u};a[l]=s,t.eupWeights=a,g=!0}else if("industrial"===a&&h>0&&e.dinWeights.length>0){let a=[...e.dinWeights],l=a.length-1,s={...a[l],quantity:a[l].quantity+h};a[l]=s,t.dinWeights=a,g=!0}return t},!1,"fillRemaining"),g},recalculate:()=>{let a=t(),l=a.eupWeights.reduce((e,t)=>e+t.quantity,0),s=a.dinWeights.reduce((e,t)=>e+t.quantity,0),i=M(a.eupWeights),n=M(a.dinWeights),r=_(a.selectedTruck,a.eupWeights,a.dinWeights,a.isEUPStackable,a.isDINStackable,a.eupLoadingPattern,"DIN_FIRST",i,n,a.stackingStrategy),d=[];if(s>0&&0===l){let e=[{id:1,quantity:300,weight:"0",stackable:a.isDINStackable}],t=_(a.selectedTruck,[],e,a.isEUPStackable,a.isDINStackable,a.eupLoadingPattern,"DIN_FIRST",i,M(e),a.stackingStrategy).totalDinPalletsVisual;if(t>0&&s>t){let e=Math.ceil(s/t),a=Math.floor(s/t),l=s%t;0===l?d.push("F\xfcr diesen Auftrag werden ".concat(a," volle LKWs ben\xf6tigt.")):d.push("Ben\xf6tigt ".concat(e," LKWs: ").concat(a," volle LKW(s) und 1 LKW mit ").concat(l," Paletten."))}}else if(l>0&&0===s){let e=[{id:1,quantity:300,weight:"0",stackable:a.isEUPStackable}],t=_(a.selectedTruck,e,[],a.isEUPStackable,a.isDINStackable,a.eupLoadingPattern,"EUP_FIRST",M(e),n,a.stackingStrategy).totalEuroPalletsVisual;if(t>0&&l>t){let e=Math.ceil(l/t),a=Math.floor(l/t),s=l%t;0===s?d.push("F\xfcr diesen Auftrag werden ".concat(a," volle LKWs ben\xf6tigt.")):d.push("Ben\xf6tigt ".concat(e," LKWs: ").concat(a," volle LKW(s) und 1 LKW mit ").concat(s," Paletten."))}}let o=[{id:-1,quantity:300,weight:a.eupWeights.length>0&&a.eupWeights[a.eupWeights.length-1].weight||"0",stackable:a.isEUPStackable}],c=Math.max(0,_(a.selectedTruck,o,a.dinWeights,a.isEUPStackable,a.isDINStackable,a.eupLoadingPattern,"DIN_FIRST",M(o),n,a.stackingStrategy).totalEuroPalletsVisual-l),u=[{id:-1,quantity:300,weight:a.dinWeights.length>0&&a.dinWeights[a.dinWeights.length-1].weight||"0",stackable:a.isDINStackable}],h=Math.max(0,_(a.selectedTruck,a.eupWeights,u,a.isEUPStackable,a.isDINStackable,a.eupLoadingPattern,"EUP_FIRST",i,M(u),a.stackingStrategy).totalDinPalletsVisual-s);e({palletArrangement:r.palletArrangement,loadedIndustrialPalletsBase:r.loadedIndustrialPalletsBase,loadedEuroPalletsBase:r.loadedEuroPalletsBase,totalDinPalletsVisual:r.totalDinPalletsVisual,totalEuroPalletsVisual:r.totalEuroPalletsVisual,utilizationPercentage:r.utilizationPercentage,warnings:Array.from(new Set([...r.warnings,...d])),totalWeightKg:r.totalWeightKg,actualEupLoadingPattern:r.eupLoadingPatternUsed,remainingCapacity:{eup:c,din:h}},!1,"recalculate")}})));function B(){var e;let{selectedTruck:t,setSelectedTruck:a,eupWeights:i,setEupWeights:n,dinWeights:r,setDinWeights:d,eupLoadingPattern:o,setEupLoadingPattern:c,isEUPStackable:u,setIsEUPStackable:h,isDINStackable:p,setIsDINStackable:m,stackingStrategy:x,setStackingStrategy:b,loadedEuroPalletsBase:f,loadedIndustrialPalletsBase:w,totalEuroPalletsVisual:y,totalDinPalletsVisual:k,warnings:N,palletArrangement:j,totalWeightKg:v,actualEupLoadingPattern:P,remainingCapacity:S,lastEdited:W,setLastEdited:D,clearAllPallets:A,maximizePallets:_,fillRemaining:U,recalculate:C}=K(),{toast:q}=g(),R=["Waggon","Waggon2"].includes(t),z=L[t],M=null!==(e=z.maxGrossWeightKg)&&void 0!==e?e:24e3;(0,s.useEffect)(()=>{C()},[t,i,r,u,p,o,x,C]);let B={DIN:{color:"hsl(142, 78%, 38%)",textShadow:"0 1px 3px rgba(15, 23, 42, 0.4)"},EUP:{color:"hsl(217, 96%, 52%)",textShadow:"0 1px 3px rgba(15, 23, 42, 0.35)"}},V=N.filter(e=>!e.toLowerCase().includes("platz")&&!e.toLowerCase().includes("ben\xf6tigt")),G={bg:"bg-gray-50",border:"border-gray-200",header:"text-gray-800",list:"text-gray-700"};return 0===V.length&&(k>0||y>0)?G={bg:"bg-green-50",border:"border-green-200",header:"text-green-800",list:"text-green-700"}:V.some(e=>e.toLowerCase().includes("konnte nicht"))?G={bg:"bg-red-50",border:"border-red-200",header:"text-red-800",list:"text-red-700"}:V.length>0&&(G={bg:"bg-yellow-50",border:"border-yellow-200",header:"text-yellow-800",list:"text-yellow-700"}),(0,l.jsxs)("div",{className:"container mx-auto p-4 font-sans space-y-6",children:[(0,l.jsxs)("header",{className:"relative bg-gradient-to-r from-blue-700 to-blue-900 p-5 rounded-t-lg shadow-lg mb-6 text-slate-100",children:[(0,l.jsxs)("div",{className:"absolute top-2 right-4 text-right text-xs text-slate-100/80 drop-shadow",children:[(0,l.jsxs)("p",{children:["Laderaumrechner \xa9 ",new Date().getFullYear()]}),(0,l.jsx)("p",{children:"by Andreas Steiner"})]}),(0,l.jsx)("h1",{className:"text-3xl font-bold text-center tracking-tight drop-shadow-sm",children:"Laderaumrechner"}),(0,l.jsx)("p",{className:"text-center text-sm text-slate-100/90 drop-shadow",children:"Visualisierung der Palettenplatzierung (Europ\xe4ische Standards)"})]}),(0,l.jsxs)("main",{className:"p-6 bg-white shadow-lg rounded-b-lg",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[(0,l.jsxs)("div",{className:"lg:col-span-1 space-y-6 bg-slate-50 p-5 rounded-lg border border-slate-200 shadow-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"truckType",className:"block text-sm font-semibold text-slate-800 mb-1 drop-shadow-sm",children:"LKW-Typ:"}),(0,l.jsx)("select",{id:"truckType",value:t,onChange:e=>{a(e.target.value)},className:"mt-1 block w-full py-2 px-3 text-sm font-medium focus:outline-none focus:ring-0 focus-visible:ring-0",children:Object.keys(L).map(e=>(0,l.jsx)("option",{value:e,children:L[e].name},e))})]}),(0,l.jsx)("div",{className:"pt-4",children:(0,l.jsx)("button",{onClick:A,className:"w-full py-2.5 px-4 font-semibold tracking-wide text-emerald-950/90 rounded-2xl",children:"Alles zur\xfccksetzen"})}),(0,l.jsxs)("div",{className:"border-t pt-4",children:[(0,l.jsx)("label",{className:"block text-sm font-semibold text-slate-800 mb-2 drop-shadow-sm",children:"Industriepaletten (DIN)"}),(0,l.jsx)(E,{entries:r,onChange:e=>{D("din"),d(e)},palletType:"DIN",stackableEnabled:p}),(0,l.jsx)("button",{onClick:()=>_("industrial"),className:"mt-2 w-full py-1.5 px-3 text-xs font-semibold tracking-wide rounded-2xl",children:"Max. DIN"}),(0,l.jsx)("button",{onClick:()=>{U("industrial"),q({title:"LKW aufgef\xfcllt",description:"Freier Platz wurde mit INDUSTRIAL Paletten gef\xfcllt."})},className:"mt-1 w-full py-1.5 px-3 text-xs font-semibold tracking-wide rounded-2xl",children:"Rest mit max. DIN f\xfcllen"}),(0,l.jsxs)("div",{className:"flex items-center mt-2",children:[(0,l.jsx)("input",{type:"checkbox",id:"dinStackable",checked:p,onChange:e=>m(e.target.checked),disabled:R,className:"h-5 w-5 disabled:cursor-not-allowed"}),(0,l.jsx)("label",{htmlFor:"dinStackable",className:"ml-2 text-sm text-slate-800 ".concat(R?"text-slate-400":""),children:"Stapelbar (2-fach)"})]})]}),(0,l.jsxs)("div",{className:"border-t pt-4",children:[(0,l.jsx)("label",{className:"block text-sm font-semibold text-slate-800 mb-2 drop-shadow-sm",children:"Europaletten (EUP)"}),(0,l.jsx)(E,{entries:i,onChange:e=>{D("eup"),n(e)},palletType:"EUP",stackableEnabled:u}),(0,l.jsx)("button",{onClick:()=>_("euro"),className:"mt-2 w-full py-1.5 px-3 text-xs font-semibold tracking-wide rounded-2xl",children:"Max. EUP"}),(0,l.jsx)("button",{onClick:()=>{U("euro"),q({title:"LKW aufgef\xfcllt",description:"Freier Platz wurde mit EURO Paletten gef\xfcllt."})},className:"mt-1 w-full py-1.5 px-3 text-xs font-semibold tracking-wide rounded-2xl",children:"Rest mit max. EUP f\xfcllen"}),(0,l.jsxs)("div",{className:"flex items-center mt-2",children:[(0,l.jsx)("input",{type:"checkbox",id:"eupStackable",checked:u,onChange:e=>h(e.target.checked),disabled:R,className:"h-5 w-5 disabled:cursor-not-allowed"}),(0,l.jsx)("label",{htmlFor:"eupStackable",className:"ml-2 text-sm text-slate-800 ".concat(R?"text-slate-400":""),children:"Stapelbar (2-fach)"})]})]}),(0,l.jsxs)("div",{className:"border-t pt-4",children:[(0,l.jsx)("label",{className:"block text-sm font-semibold text-slate-800 mb-1 drop-shadow-sm",children:"Stacking-Modus"}),(0,l.jsx)("p",{className:"text-xs text-slate-600 mb-2",children:"Steuert, ob gestapelte Paletten bevorzugt in der Achszone bleiben oder maximal ausgenutzt werden."}),(0,l.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,l.jsxs)("label",{className:"flex items-start text-sm text-slate-800",children:[(0,l.jsx)("input",{type:"radio",name:"stackingStrategy",value:"axle_safe",checked:"axle_safe"===x,onChange:e=>b(e.target.value),className:"h-5 w-5 mt-0.5"}),(0,l.jsx)("span",{className:"ml-2",children:"Achslast-optimiert (Stacks starten in der Mitte, Bodenpl\xe4tze bleiben frei)"})]}),(0,l.jsxs)("label",{className:"flex items-start text-sm text-slate-800",children:[(0,l.jsx)("input",{type:"radio",name:"stackingStrategy",value:"max_pairs",checked:"max_pairs"===x,onChange:e=>b(e.target.value),className:"h-5 w-5 mt-0.5"}),(0,l.jsx)("span",{className:"ml-2",children:"Maximale Stapelanzahl (klassische Variante, stapelt so fr\xfch wie m\xf6glich)"})]})]})]}),(0,l.jsxs)("div",{className:"border-t pt-4",children:[(0,l.jsxs)("label",{className:"block text-sm font-semibold text-slate-800 mb-2",children:["EUP Lade-Pattern:",(0,l.jsxs)("span",{className:"text-xs text-slate-600",children:[" (Gew\xe4hlt: ","none"===P?"Keines":P,")"]})]}),(0,l.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,l.jsxs)("label",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"radio",name:"eupLoadingPattern",value:"auto",checked:"auto"===o,onChange:e=>c(e.target.value),className:"h-5 w-5"}),(0,l.jsx)("span",{className:"ml-2 text-sm text-slate-800",children:"Auto-Optimieren"})]}),(0,l.jsxs)("label",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"radio",name:"eupLoadingPattern",value:"long",checked:"long"===o,onChange:e=>c(e.target.value),className:"h-5 w-5"}),(0,l.jsx)("span",{className:"ml-2 text-sm text-slate-800",children:"L\xe4ngs (3 nebeneinander)"})]}),(0,l.jsxs)("label",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"radio",name:"eupLoadingPattern",value:"broad",checked:"broad"===o,onChange:e=>c(e.target.value),className:"h-5 w-5"}),(0,l.jsx)("span",{className:"ml-2 text-sm text-slate-800",children:"Quer (2 nebeneinander)"})]})]})]})]}),(0,l.jsx)(F,{palletArrangement:j,selectedTruck:t,truckConfig:z})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,l.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 shadow-sm text-center",children:[(0,l.jsx)("h3",{className:"font-semibold text-slate-900 mb-2 drop-shadow-sm",children:"Geladene Paletten (Visuell)"}),(0,l.jsxs)("p",{className:"text-slate-900/85",children:["Industrie (DIN): ",(0,l.jsx)("span",{className:"font-bold text-lg text-slate-900",children:k})]}),(0,l.jsxs)("p",{className:"text-slate-900/85",children:["Euro (EUP): ",(0,l.jsx)("span",{className:"font-bold text-lg text-slate-900",children:y})]}),(0,l.jsxs)("p",{className:"text-xs mt-1 text-slate-900/70",children:["(Basis: ",w," DIN, ",f," EUP)"]})]}),(0,l.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200 shadow-sm text-center",children:[(0,l.jsx)("h3",{className:"font-semibold text-slate-900 mb-2 drop-shadow-sm",children:"Verbleibende Kapazit\xe4t"}),(()=>{let e="din"===W?"DIN":"EUP",t="din"===W?"EUP":"DIN",a="din"===W?S.din:S.eup,s="din"===W?S.eup:S.din,i=B[e],n=B[t];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"font-bold text-2xl text-slate-900/90 drop-shadow-sm",children:"Platz f\xfcr:"}),(0,l.jsxs)("p",{className:"font-bold text-2xl text-slate-900/90 space-x-1",children:[(0,l.jsx)("span",{style:i,children:a}),(0,l.jsx)("span",{className:"text-slate-900/80",children:"weitere"}),(0,l.jsx)("span",{style:i,children:e}),(0,l.jsx)("span",{className:"text-slate-900/80",children:1===a?"Palette":"Paletten"})]}),(0,l.jsx)("p",{className:"text-slate-900/80",children:"oder"}),(0,l.jsxs)("p",{className:"font-bold text-xl text-slate-900/85 space-x-1",children:[(0,l.jsx)("span",{style:n,children:s}),(0,l.jsx)("span",{className:"text-slate-900/70",children:"weitere"}),(0,l.jsx)("span",{style:n,children:t}),(0,l.jsx)("span",{className:"text-slate-900/70",children:1===s?"Palette":"Paletten"})]})]})})()]}),(0,l.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200 shadow-sm text-center",children:[(0,l.jsx)("h3",{className:"font-semibold text-slate-900 mb-2 drop-shadow-sm",children:"Gesch\xe4tztes Gewicht"}),(0,l.jsxs)("p",{className:"font-bold text-2xl text-slate-900/90",children:[T.format(v)," kg"]}),(0,l.jsxs)("p",{className:"text-xs mt-1 text-slate-900/70",children:["(Max: ",T.format(M)," kg)"]})]}),(0,l.jsxs)("div",{className:"".concat(G.bg," p-4 rounded-lg border ").concat(G.border," shadow-sm"),children:[(0,l.jsx)("h3",{className:"font-semibold mb-2 ".concat(G.header," drop-shadow-sm"),children:"Meldungen"}),N.length>0?(0,l.jsx)("ul",{className:"list-disc list-inside text-sm space-y-1 ".concat(G.list),children:N.map((e,t)=>(0,l.jsx)("li",{children:e},t))}):(0,l.jsx)("p",{className:"text-sm ".concat(G.list),children:"Keine Probleme erkannt."})]})]})]}),(0,l.jsx)("footer",{className:"text-center py-4 mt-8 text-sm text-slate-100/80 border-t border-gray-200",children:(0,l.jsxs)("p",{className:"drop-shadow",children:["Laderaumrechner \xa9 ",new Date().getFullYear()," by Andreas Steiner"]})}),(0,l.jsx)(I,{})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[757,685,411,358],()=>t(6053)),_N_E=e.O()}]);