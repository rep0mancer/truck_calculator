(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1:(e,t,n)=>{Promise.resolve().then(n.bind(n,2201))},2201:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>$});var a=n(607),i=n(8055),l=n(7993),r=n(7645);let s=[{id:"sprinter",name:"Van (Sprinter L3H2)",innerLength:4300,innerWidth:1780,innerHeight:1900,maxPayloadKg:1200},{id:"truck7_5t",name:"Box Truck 7.5t",innerLength:6100,innerWidth:2400,innerHeight:2300,maxPayloadKg:3e3},{id:"eu_semitrailer",name:"EU Trailer 13.6m",innerLength:13600,innerWidth:2460,innerHeight:2700,maxPayloadKg:24e3},{id:"20ft",name:"ISO Container 20ft",innerLength:5898,innerWidth:2352,innerHeight:2393,maxPayloadKg:28200},{id:"40ft",name:"ISO Container 40ft",innerLength:12032,innerWidth:2352,innerHeight:2393,maxPayloadKg:26800}],o=[{id:"euro",name:"EUR Pallet 1200\xd7800",length:1200,width:800,height:144,weightKg:25},{id:"industrial",name:"Industrial 1200\xd71000",length:1200,width:1e3,height:150,weightKg:30},{id:"half_euro",name:"Half EUR 800\xd7600",length:800,width:600,height:140,weightKg:10}];function d(e){return Math.max(0,e)}function c(e,t,n,a,i){let l=Math.max(0,a.wallClearance),r=Math.max(0,a.betweenClearance),s=Math.max(0,a.aisleLengthReserve||0),o=e.innerLength-2*l-s,c=e.innerWidth-2*l,h=Math.floor((o+r)/(t+r)),m=Math.floor((c+r)/(n+r)),u=d(h),g=d(m),x=[],p=1;for(let e=0;e<g;e++)for(let a=0;a<u;a++){let s=l+a*(t+r),o=l+e*(n+r);x.push({x:s,y:o,w:t,h:n,rotated:i,idx:p++})}return{cols:u,rows:g,count:u*g,placements:x}}var h=n(3276);let m=h.k5(["metric","imperial"]),u=h.Ik({id:h.Yj().min(1),name:h.Yj().min(1),innerLength:h.ai().finite().nonnegative(),innerWidth:h.ai().finite().nonnegative(),innerHeight:h.ai().finite().nonnegative().optional(),maxPayloadKg:h.ai().finite().nonnegative().optional()}),g=h.Ik({id:h.Yj().min(1),name:h.Yj().min(1),length:h.ai().finite().nonnegative(),width:h.ai().finite().nonnegative(),height:h.ai().finite().nonnegative().optional(),weightKg:h.ai().finite().nonnegative().optional()}),x=h.Ik({allowRotate:h.zM(),wallClearance:h.ai().finite().nonnegative(),betweenClearance:h.ai().finite().nonnegative(),aisleLengthReserve:h.ai().finite().nonnegative().optional()}),p=h.Ik({container:u,pallet:g,constraints:x,units:m.default("metric"),note:h.Yj().max(2e3).optional()}),v={allowRotate:!0,wallClearance:60,betweenClearance:50,aisleLengthReserve:0},f=(0,l.v)()((0,r.lt)((e,t)=>{var n,a,i,l;return{units:"metric",containerId:null!==(i=null===(n=s[0])||void 0===n?void 0:n.id)&&void 0!==i?i:"sprinter",palletId:null!==(l=null===(a=o[0])||void 0===a?void 0:a.id)&&void 0!==l?l:"euro",constraints:v,note:void 0,plan:null,lastValidationErrors:[],setUnits:t=>e({units:t},!1,"setUnits"),setContainerById:t=>e({containerId:t,containerCustom:void 0},!1,"setContainerById"),setCustomContainer:t=>e({containerId:"custom",containerCustom:t},!1,"setCustomContainer"),setPalletById:t=>e({palletId:t,palletCustom:void 0},!1,"setPalletById"),setCustomPallet:t=>e({palletId:"custom",palletCustom:t},!1,"setCustomPallet"),setConstraints:t=>e({constraints:t},!1,"setConstraints"),setNote:t=>e({note:t},!1,"setNote"),recompute:()=>{let n=function(e){var t,n;let a={container:"custom"===e.containerId&&e.containerCustom?e.containerCustom:null!==(t=s.find(t=>t.id===e.containerId))&&void 0!==t?t:s[0],pallet:"custom"===e.palletId&&e.palletCustom?e.palletCustom:null!==(n=o.find(t=>t.id===e.palletId))&&void 0!==n?n:o[0],constraints:e.constraints,units:e.units,note:e.note},i=p.safeParse(a);return i.success?{plan:function(e){var t;let{container:n,pallet:a,constraints:i}=e,l=null!==(t=e.units)&&void 0!==t?t:"metric",r=Math.max(0,i.wallClearance),s=Math.max(0,i.aisleLengthReserve||0),o=n.innerLength-2*r-s,h=n.innerWidth-2*r,m=o>=Math.min(a.length,a.width)&&h>=Math.min(a.length,a.width),u=c(n,a.length,a.width,i,!1),g={cols:0,rows:0,count:0,placements:[]};i.allowRotate&&(g=c(n,a.width,a.length,i,!0));let x={cols:0,rows:0,count:0,placements:[]};i.allowRotate&&(x=function(e,t,n){let a=Math.max(0,n.wallClearance),i=Math.max(0,n.betweenClearance),l=Math.max(0,n.aisleLengthReserve||0),r=e.innerLength-2*a-l,s=e.innerWidth-2*a,o=c(e,t.length,t.width,n,!1),h=s-(o.rows>0?o.rows*t.width+(o.rows-1)*i:0)>=t.length+(o.rows>0?i:0)&&r>0,m=[...o.placements],u=0;if(h){let e=d(Math.floor((r+i)/(t.width+i)));u=e;let n=a+o.rows*t.width+(o.rows>0?o.rows*i:0),l=o.count+1;for(let r=0;r<e;r++){let e=a+r*(t.width+i);m.push({x:e,y:n,w:t.width,h:t.length,rotated:!0,idx:l++})}}return{cols:o.cols,rows:o.rows+(h?1:0),count:o.count+u,placements:m}}(n,a,i));let p=[u,g,x],v=p[0],f=n.innerLength*n.innerWidth,j=a.length*a.width;for(let e of p)if(e.count>v.count)v=e;else if(e.count===v.count){let t=v.count*j/f;e.count*j/f>t&&(v=e)}let b=m?v.placements:[],w={container:n,pallet:a,constraints:i,units:l,placements:b,metrics:function(e){var t;let n;let{container:a,pallet:i,placements:l}=e,r=l.length,s=a.innerLength*a.innerWidth,o=i.length*i.width;if(null!=a.innerHeight&&null!=i.height){let e=s*a.innerHeight,t=r*o*i.height;n=e>0?t/e:0}let d=r*(i.weightKg||0);return{count:r,floorAreaUsedRatio:s>0?r*o/s:0,volumeUsedRatio:n,totalPalletWeightKg:d,maxPayloadExceeded:d>(null!==(t=a.maxPayloadKg)&&void 0!==t?t:1/0)}}({container:n,pallet:a,constraints:i,units:l,placements:b}),note:e.note};try{let e=function(){var e,t,i,l,r,s,o,d,c,h,m;let u=n.id;return"eu_semitrailer"===u?{perSlotWeightKg:null!==(e=a.weightKg)&&void 0!==e?e:0,binSizeMm:1e3,maxKgPerM:3e3,supportFrontX:1e3,supportRearX:Math.max(2e3,n.innerLength-1500),rearAxleGroupMaxKg:24e3,kingpinMinKg:6e3,kingpinMaxKg:15e3,payloadMaxKg:null!==(t=n.maxPayloadKg)&&void 0!==t?t:void 0}:"truck7_5t"===u?{perSlotWeightKg:null!==(i=a.weightKg)&&void 0!==i?i:0,binSizeMm:1e3,maxKgPerM:1500,supportFrontX:800,supportRearX:Math.max(1600,n.innerLength-1200),rearAxleGroupMaxKg:5200,kingpinMinKg:void 0,kingpinMaxKg:void 0,payloadMaxKg:null!==(l=n.maxPayloadKg)&&void 0!==l?l:3e3}:"sprinter"===u?{perSlotWeightKg:null!==(r=a.weightKg)&&void 0!==r?r:0,binSizeMm:1e3,maxKgPerM:800,supportFrontX:600,supportRearX:Math.max(1200,n.innerLength-1e3),rearAxleGroupMaxKg:1800,kingpinMinKg:void 0,kingpinMaxKg:void 0,payloadMaxKg:null!==(s=n.maxPayloadKg)&&void 0!==s?s:1200}:"20ft"===u||"40ft"===u?{perSlotWeightKg:null!==(o=a.weightKg)&&void 0!==o?o:0,binSizeMm:1e3,maxKgPerM:3e3,supportFrontX:1e3,supportRearX:Math.max(2e3,n.innerLength-1500),rearAxleGroupMaxKg:null!==(d=n.maxPayloadKg)&&void 0!==d?d:26e3,kingpinMinKg:void 0,kingpinMaxKg:void 0,payloadMaxKg:null!==(c=n.maxPayloadKg)&&void 0!==c?c:void 0}:{perSlotWeightKg:null!==(h=a.weightKg)&&void 0!==h?h:0,binSizeMm:1e3,maxKgPerM:2e3,supportFrontX:800,supportRearX:Math.max(1600,n.innerLength-1200),payloadMaxKg:null!==(m=n.maxPayloadKg)&&void 0!==m?m:void 0}}(),t=function(e,t){var n,a,i,l,r;let s=Math.max(0,Math.floor(null!==(n=t.perSlotWeightKg)&&void 0!==n?n:0)),o=Math.max(1,Math.floor(null!==(a=t.binSizeMm)&&void 0!==a?a:1e3)),d=new Map,c=0;for(let t of e){let e=Math.floor((t.y+t.h/2)/o),n=(null!==(i=t.units)&&void 0!==i?i:[]).reduce((e,t)=>e+("number"==typeof(null==t?void 0:t.weightKg)?t.weightKg:0),0),a=n>0?n:s;c+=a,d.set(e,(null!==(l=d.get(e))&&void 0!==l?l:0)+a)}let h=0;for(let e of d.values())h=Math.max(h,e);let m=1e3*h/o,u=[];null!=t.maxKgPerM&&m>t.maxKgPerM&&u.push("Peak linear density ".concat(Math.round(m)," kg/m exceeds threshold ").concat(t.maxKgPerM," kg/m."));let g=Math.max(0,Math.floor(t.supportFrontX)),x=Math.max(g+1,Math.floor(t.supportRearX)),p=x-g,v=0,f=0;for(let t of e){let e=Math.max(g,Math.min(x,t.y+t.h/2)),n=(null!==(r=t.units)&&void 0!==r?r:[]).reduce((e,t)=>e+("number"==typeof(null==t?void 0:t.weightKg)?t.weightKg:0),0),a=n>0?n:s,i=(x-e)/p,l=(e-g)/p;v+=a*i,f+=a*l}return null!=t.rearAxleGroupMaxKg&&f>t.rearAxleGroupMaxKg&&u.push("Rear axle group load ".concat(Math.round(f)," kg exceeds ").concat(t.rearAxleGroupMaxKg," kg.")),null!=t.kingpinMinKg&&v<t.kingpinMinKg&&u.push("Front support (kingpin) load ".concat(Math.round(v)," kg below minimum ").concat(t.kingpinMinKg," kg.")),null!=t.kingpinMaxKg&&v>t.kingpinMaxKg&&u.push("Front support (kingpin) load ".concat(Math.round(v)," kg exceeds ").concat(t.kingpinMaxKg," kg.")),null!=t.payloadMaxKg&&c>t.payloadMaxKg&&u.push("Total payload ".concat(Math.round(c)," kg exceeds ").concat(t.payloadMaxKg," kg.")),{R_front:Math.round(v),R_rear:Math.round(f),maxKgPerM:Math.round(m),warnings:u}}(w.placements,e);w.axles=t}catch(e){console.error("Axle analysis failed:",e)}return w}({container:i.data.container,pallet:i.data.pallet,constraints:i.data.constraints,units:i.data.units,note:i.data.note}),errors:[]}:{plan:null,errors:i.error.issues.map(e=>"".concat(e.path.join("."),": ").concat(e.message))}}(t());e({plan:n.plan,lastValidationErrors:n.errors},!1,"recompute")},reset:()=>{var t,n,a,i;return e({units:"metric",containerId:null!==(a=null===(t=s[0])||void 0===t?void 0:t.id)&&void 0!==a?a:"sprinter",containerCustom:void 0,palletId:null!==(i=null===(n=o[0])||void 0===n?void 0:n.id)&&void 0!==i?i:"euro",palletCustom:void 0,constraints:v,note:void 0,plan:null,lastValidationErrors:[]},!1,"reset")}}}));var j=n(1737),b=n(2463),w=n(3719),N=n(2985);function y(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,N.QP)((0,w.$)(t))}let M=(0,b.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),k=i.forwardRef((e,t)=>{let{className:n,variant:i,size:l,asChild:r=!1,...s}=e,o=r?j.DX:"button";return(0,a.jsx)(o,{className:y(M({variant:i,size:l,className:n})),ref:t,...s})});k.displayName="Button";let K=i.forwardRef((e,t)=>{let{className:n,type:i,...l}=e;return(0,a.jsx)("input",{type:i,className:y("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...l})});K.displayName="Input";var C=n(6775);let P=(0,b.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),R=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,a.jsx)(C.b,{ref:t,className:y(P(),n),...i})});R.displayName=C.b.displayName;var L=n(2950),W=n(2744),F=n(4849),I=n(5154);let S=L.bL;L.YJ;let A=L.WT,H=i.forwardRef((e,t)=>{let{className:n,children:i,...l}=e;return(0,a.jsxs)(L.l9,{ref:t,className:y("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...l,children:[i,(0,a.jsx)(L.In,{asChild:!0,children:(0,a.jsx)(W.A,{className:"h-4 w-4 opacity-50"})})]})});H.displayName=L.l9.displayName;let _=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,a.jsx)(L.PP,{ref:t,className:y("flex cursor-default items-center justify-center py-1",n),...i,children:(0,a.jsx)(F.A,{className:"h-4 w-4"})})});_.displayName=L.PP.displayName;let z=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,a.jsx)(L.wn,{ref:t,className:y("flex cursor-default items-center justify-center py-1",n),...i,children:(0,a.jsx)(W.A,{className:"h-4 w-4"})})});z.displayName=L.wn.displayName;let U=i.forwardRef((e,t)=>{let{className:n,children:i,position:l="popper",...r}=e;return(0,a.jsx)(L.ZL,{children:(0,a.jsxs)(L.UC,{ref:t,className:y("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:l,...r,children:[(0,a.jsx)(_,{}),(0,a.jsx)(L.LM,{className:y("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),(0,a.jsx)(z,{})]})})});U.displayName=L.UC.displayName,i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,a.jsx)(L.JU,{ref:t,className:y("px-2 py-1.5 text-sm font-semibold",n),...i})}).displayName=L.JU.displayName;let X=i.forwardRef((e,t)=>{let{className:n,children:i,...l}=e;return(0,a.jsxs)(L.q7,{ref:t,className:y("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...l,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(L.VF,{children:(0,a.jsx)(I.A,{className:"h-4 w-4"})})}),(0,a.jsx)(L.p4,{children:i})]})});X.displayName=L.q7.displayName,i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,a.jsx)(L.wv,{ref:t,className:y("-mx-1 my-1 h-px bg-muted",n),...i})}).displayName=L.wv.displayName;var E=n(7644);let V=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,a.jsx)(E.bL,{className:y("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...i,ref:t,children:(0,a.jsx)(E.zi,{className:y("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});V.displayName=E.bL.displayName;var B=n(4750);let G=i.forwardRef((e,t)=>{let{className:n,orientation:i="horizontal",decorative:l=!0,...r}=e;return(0,a.jsx)(B.b,{ref:t,decorative:l,orientation:i,className:y("shrink-0 bg-border","horizontal"===i?"h-[1px] w-full":"h-full w-[1px]",n),...r})});G.displayName=B.b.displayName;let T=n(9478).b,Y=(0,i.forwardRef)(function(e,t){let{plan:n,className:l}=e,{container:r,pallet:s,placements:o,constraints:d}=n,c=(0,i.useMemo)(()=>Math.max(24,Math.min(.035*Math.min(r.innerLength,r.innerWidth),160)),[r.innerLength,r.innerWidth]),h=(0,i.useMemo)(()=>Math.max(4,Math.min(.003*Math.min(r.innerLength,r.innerWidth),20)),[r.innerLength,r.innerWidth]),m="".concat(s.length,"\xd7").concat(s.width," mm").concat(s.height?" \xd7 ".concat(s.height," mm"):""),u="#60a5fa",g="#3b82f6",x="#1e3a8a",p=r.innerLength/r.innerWidth;return(0,a.jsxs)("div",{className:(0,w.A)("w-full",l),children:[(0,a.jsx)(T,{ratio:p,children:(0,a.jsxs)("svg",{ref:t,role:"img","aria-label":"Container layout visualizer",viewBox:"0 0 ".concat(r.innerLength," ").concat(r.innerWidth),className:"h-full w-full",children:[(0,a.jsx)("rect",{x:0,y:0,width:r.innerLength,height:r.innerWidth,fill:"#f8fafc",stroke:"#334155",strokeWidth:h}),o.map(e=>(0,a.jsxs)("g",{children:[(0,a.jsx)("rect",{x:e.x,y:e.y,width:e.w,height:e.h,fill:e.rotated?g:u,stroke:x,strokeWidth:h,rx:Math.max(0,1.5*h),ry:Math.max(0,1.5*h)}),(0,a.jsx)("text",{x:e.x+e.w/2,y:e.y+e.h/2,textAnchor:"middle",dominantBaseline:"central",fill:"#0f172a",fontSize:c,fontWeight:600,children:e.idx})]},e.idx))]})}),(0,a.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-4 text-xs text-slate-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"inline-block h-3 w-6 rounded-sm",style:{backgroundColor:u,outline:"1px solid ".concat(x)}}),(0,a.jsxs)("span",{children:["pallet ",m]})]}),d.allowRotate&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"inline-block h-3 w-6 rounded-sm",style:{backgroundColor:g,outline:"1px solid ".concat(x)}}),(0,a.jsx)("span",{children:"rotated allowed"})]}),(0,a.jsxs)("div",{className:"text-slate-500",children:["container ",r.innerLength,"\xd7",r.innerWidth," mm",r.innerHeight?" \xd7 ".concat(r.innerHeight," mm"):""]})]})]})}),O=(0,b.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function J(e){let{className:t,variant:n,...i}=e;return(0,a.jsx)("div",{className:y(O({variant:n}),t),...i})}function q(e){let{plan:t}=e;if(!t)return(0,a.jsx)("p",{className:"mt-3 text-sm text-slate-600",children:'No plan computed yet. Adjust inputs and click "Compute plan".'});let{metrics:n}=t,i=t.axles;return(0,a.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm md:grid-cols-3",children:[(0,a.jsxs)("div",{className:"rounded-md border p-3",children:[(0,a.jsx)("div",{className:"text-slate-500",children:"Total pallets"}),(0,a.jsx)("div",{className:"text-base font-semibold",children:n.count})]}),(0,a.jsxs)("div",{className:"rounded-md border p-3",children:[(0,a.jsx)("div",{className:"text-slate-500",children:"Floor area used"}),(0,a.jsxs)("div",{className:"text-base font-semibold",children:[(100*n.floorAreaUsedRatio).toFixed(1),"%"]})]}),null!=n.volumeUsedRatio&&(0,a.jsxs)("div",{className:"rounded-md border p-3",children:[(0,a.jsx)("div",{className:"text-slate-500",children:"Volume used"}),(0,a.jsxs)("div",{className:"text-base font-semibold",children:[(100*n.volumeUsedRatio).toFixed(1),"%"]})]}),null!=n.totalPalletWeightKg&&(0,a.jsxs)("div",{className:"rounded-md border p-3",children:[(0,a.jsx)("div",{className:"text-slate-500",children:"Total est. weight"}),(0,a.jsxs)("div",{className:"text-base font-semibold",children:[n.totalPalletWeightKg.toFixed(0)," kg"]})]}),n.maxPayloadExceeded&&(0,a.jsx)("div",{className:"col-span-2 md:col-span-1 flex items-center justify-start",children:(0,a.jsx)(J,{variant:"destructive",children:"Payload exceeds max"})}),i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"rounded-md border p-3",children:[(0,a.jsx)("div",{className:"text-slate-500",children:"Rear axle group (R_rear)"}),(0,a.jsxs)("div",{className:"text-base font-semibold",children:[i.R_rear.toFixed(0)," kg"]})]}),(0,a.jsxs)("div",{className:"rounded-md border p-3",children:[(0,a.jsx)("div",{className:"text-slate-500",children:"Front support (R_front)"}),(0,a.jsxs)("div",{className:"text-base font-semibold",children:[i.R_front.toFixed(0)," kg"]})]}),(0,a.jsxs)("div",{className:"rounded-md border p-3",children:[(0,a.jsx)("div",{className:"text-slate-500",children:"Peak linear density"}),(0,a.jsxs)("div",{className:"text-base font-semibold",children:[i.maxKgPerM.toFixed(0)," kg/m"]})]})]})]}),i&&i.warnings&&i.warnings.length>0&&(0,a.jsx)("div",{className:"rounded-md border border-amber-200 bg-amber-50 p-3 text-sm text-amber-900",children:(0,a.jsx)("ul",{className:"list-disc pl-5",children:i.warnings.map((e,t)=>(0,a.jsx)("li",{children:e},t))})})]})}function D(e,t){return null==e||Number.isNaN(e)?"":"imperial"===t?(e/25.4).toFixed(1):Math.round(e).toString()}function Q(e,t){let n=parseFloat(e);return Number.isFinite(n)?"imperial"===t?Math.round(25.4*n):Math.round(n):0}function Z(e){let{children:t}=e;return(0,a.jsx)("h2",{className:"text-sm font-semibold tracking-tight text-slate-800",children:t})}function $(){var e,t,n,l;let{units:r,containerId:d,containerCustom:c,palletId:h,palletCustom:m,constraints:u,plan:g,lastValidationErrors:x,setUnits:p,setContainerById:v,setCustomContainer:j,setPalletById:b,setCustomPallet:w,setConstraints:N,recompute:y,reset:M}=f(),C="metric"===r?"mm":"in",P=(0,i.useMemo)(()=>{var e;return"custom"===d&&c?c:null!==(e=s.find(e=>e.id===d))&&void 0!==e?e:s[0]},[c,d]),L=(0,i.useMemo)(()=>{var e;return"custom"===h&&m?m:null!==(e=o.find(e=>e.id===h))&&void 0!==e?e:o[0]},[m,h]),W=(e,t)=>{var n,a;let i={id:"custom",name:(null==c?void 0:c.name)||"Custom container",innerLength:null!==(n=null==c?void 0:c.innerLength)&&void 0!==n?n:P.innerLength,innerWidth:null!==(a=null==c?void 0:c.innerWidth)&&void 0!==a?a:P.innerWidth,innerHeight:null==c?void 0:c.innerHeight,maxPayloadKg:null==c?void 0:c.maxPayloadKg};"name"===e?i.name=t||"Custom container":"maxPayloadKg"===e?i.maxPayloadKg=parseFloat(t)||void 0:"innerHeight"===e?i.innerHeight=""===t?void 0:Q(t,r):"innerLength"===e?i.innerLength=Q(t,r):"innerWidth"===e&&(i.innerWidth=Q(t,r)),j(i)},F=(e,t)=>{var n,a;let i={id:"custom",name:(null==m?void 0:m.name)||"Custom pallet",length:null!==(n=null==m?void 0:m.length)&&void 0!==n?n:L.length,width:null!==(a=null==m?void 0:m.width)&&void 0!==a?a:L.width,height:null==m?void 0:m.height,weightKg:null==m?void 0:m.weightKg};"name"===e?i.name=t||"Custom pallet":"weightKg"===e?i.weightKg=parseFloat(t)||void 0:"height"===e?i.height=""===t?void 0:Q(t,r):"length"===e?i.length=Q(t,r):"width"===e&&(i.width=Q(t,r)),w(i)},I=(e,t)=>{let n={...u};"allowRotate"===e?n.allowRotate=!!t:"aisleLengthReserve"===e?n.aisleLengthReserve=""===t?0:Q(String(t),r):"wallClearance"===e?n.wallClearance=Q(String(t),r):"betweenClearance"===e&&(n.betweenClearance=Q(String(t),r)),N(n)};return(0,a.jsxs)("div",{className:"mx-auto max-w-6xl p-4 md:p-6",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Load Planner"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(R,{htmlFor:"units",className:"text-sm",children:["Units: ","metric"===r?"Metric (mm)":"Imperial (in)"]}),(0,a.jsx)(V,{id:"units",checked:"imperial"===r,onCheckedChange:e=>p(e?"imperial":"metric")})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"rounded-lg border p-4 md:p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(Z,{children:"Container"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsx)(R,{className:"mb-1 block",children:"Preset"}),(0,a.jsxs)(S,{value:d,onValueChange:e=>{if("custom"===e){var t,n;j({id:"custom",name:(null==c?void 0:c.name)||"Custom container",innerLength:null!==(t=null==c?void 0:c.innerLength)&&void 0!==t?t:6e3,innerWidth:null!==(n=null==c?void 0:c.innerWidth)&&void 0!==n?n:2400,innerHeight:null==c?void 0:c.innerHeight,maxPayloadKg:null==c?void 0:c.maxPayloadKg})}else v(e)},children:[(0,a.jsx)(H,{className:"w-full",children:(0,a.jsx)(A,{placeholder:"Select container"})}),(0,a.jsxs)(U,{children:[s.map(e=>(0,a.jsx)(X,{value:e.id,children:e.name},e.id)),(0,a.jsx)(X,{value:"custom",children:"Custom…"})]})]})]}),"custom"===d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsx)(R,{className:"mb-1 block",children:"Name"}),(0,a.jsx)(K,{value:(null==c?void 0:c.name)||"Custom container",onChange:e=>W("name",e.target.value),placeholder:"Custom container"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(R,{className:"mb-1 block",children:["Inner length (",C,")"]}),(0,a.jsx)(K,{inputMode:"decimal",value:D(P.innerLength,r),onChange:e=>W("innerLength",e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(R,{className:"mb-1 block",children:["Inner width (",C,")"]}),(0,a.jsx)(K,{inputMode:"decimal",value:D(P.innerWidth,r),onChange:e=>W("innerWidth",e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(R,{className:"mb-1 block",children:["Inner height (",C,")"]}),(0,a.jsx)(K,{inputMode:"decimal",value:D(P.innerHeight,r),onChange:e=>W("innerHeight",e.target.value),placeholder:"optional (".concat(C,")")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(R,{className:"mb-1 block",children:"Max payload (kg)"}),(0,a.jsx)(K,{inputMode:"decimal",value:null!==(n=null==c?void 0:null===(e=c.maxPayloadKg)||void 0===e?void 0:e.toString())&&void 0!==n?n:"",onChange:e=>W("maxPayloadKg",e.target.value),placeholder:"optional"})]})]})]})]}),(0,a.jsx)(G,{}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(Z,{children:"Pallet"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsx)(R,{className:"mb-1 block",children:"Preset"}),(0,a.jsxs)(S,{value:h,onValueChange:e=>{if("custom"===e){var t,n;w({id:"custom",name:(null==m?void 0:m.name)||"Custom pallet",length:null!==(t=null==m?void 0:m.length)&&void 0!==t?t:1200,width:null!==(n=null==m?void 0:m.width)&&void 0!==n?n:800,height:null==m?void 0:m.height,weightKg:null==m?void 0:m.weightKg})}else b(e)},children:[(0,a.jsx)(H,{className:"w-full",children:(0,a.jsx)(A,{placeholder:"Select pallet"})}),(0,a.jsxs)(U,{children:[o.map(e=>(0,a.jsx)(X,{value:e.id,children:e.name},e.id)),(0,a.jsx)(X,{value:"custom",children:"Custom…"})]})]})]}),"custom"===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsx)(R,{className:"mb-1 block",children:"Name"}),(0,a.jsx)(K,{value:(null==m?void 0:m.name)||"Custom pallet",onChange:e=>F("name",e.target.value),placeholder:"Custom pallet"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(R,{className:"mb-1 block",children:["Length (",C,")"]}),(0,a.jsx)(K,{inputMode:"decimal",value:D(L.length,r),onChange:e=>F("length",e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(R,{className:"mb-1 block",children:["Width (",C,")"]}),(0,a.jsx)(K,{inputMode:"decimal",value:D(L.width,r),onChange:e=>F("width",e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(R,{className:"mb-1 block",children:["Height (",C,")"]}),(0,a.jsx)(K,{inputMode:"decimal",value:D(L.height,r),onChange:e=>F("height",e.target.value),placeholder:"optional (".concat(C,")")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(R,{className:"mb-1 block",children:"Weight (kg)"}),(0,a.jsx)(K,{inputMode:"decimal",value:null!==(l=null==m?void 0:null===(t=m.weightKg)||void 0===t?void 0:t.toString())&&void 0!==l?l:"",onChange:e=>F("weightKg",e.target.value),placeholder:"optional"})]})]})]})]}),(0,a.jsx)(G,{}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(Z,{children:"Constraints"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3 sm:col-span-2",children:[(0,a.jsx)(R,{htmlFor:"rotate",className:"text-sm",children:"Allow rotate"}),(0,a.jsx)(V,{id:"rotate",checked:u.allowRotate,onCheckedChange:e=>I("allowRotate",e)})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(R,{className:"mb-1 block",children:["Wall clearance (",C,")"]}),(0,a.jsx)(K,{inputMode:"decimal",value:D(u.wallClearance,r),onChange:e=>I("wallClearance",e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(R,{className:"mb-1 block",children:["Between clearance (",C,")"]}),(0,a.jsx)(K,{inputMode:"decimal",value:D(u.betweenClearance,r),onChange:e=>I("betweenClearance",e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(R,{className:"mb-1 block",children:["Aisle reserve length (",C,")"]}),(0,a.jsx)(K,{inputMode:"decimal",value:D(u.aisleLengthReserve,r),onChange:e=>I("aisleLengthReserve",e.target.value),placeholder:"optional (".concat(C,")")})]})]})]}),x.length>0&&(0,a.jsx)("div",{className:"rounded-md border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:(0,a.jsx)("ul",{className:"list-disc pl-5",children:x.map((e,t)=>(0,a.jsx)("li",{children:e},t))})}),(0,a.jsxs)("div",{className:"flex items-center gap-3 pt-2",children:[(0,a.jsx)(k,{onClick:()=>y(),variant:"default",children:"Compute plan"}),(0,a.jsx)(k,{onClick:()=>M(),variant:"secondary",children:"Reset"})]})]}),(0,a.jsxs)("div",{className:"rounded-lg border p-4 md:p-6",children:[(0,a.jsx)(Z,{children:"Plan"}),g?(0,a.jsxs)("div",{className:"mt-3 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-slate-500",children:"Visualizer"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(Y,{plan:g})})]}),(0,a.jsx)(q,{plan:g})]}):(0,a.jsx)("p",{className:"mt-3 text-sm text-slate-600",children:'No plan computed yet. Adjust inputs and click "Compute plan".'})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[7,16,697,358],()=>t(1)),_N_E=e.O()}]);